function HoverOnTouch(){this.init();this.addCss();this.rewriteLinks();this.touchEvents();}
HoverOnTouch.prototype.init=function(){this.all_objects=document.getElementsByClassName('hoverontouch');this.pressTimer;this.longpress=false;this.scrollStartX=0;this.scrollStartY=0;this.multipleTouchAmount=0;this.multiTouchGesture=false;};HoverOnTouch.prototype.addCss=function(){for(var i=0;i<this.all_objects.length;i++){var object=this.all_objects[i];object.style.cssText="-webkit-tap-highlight-color: rgba(0,0,0,0); -webkit-user-select: none; -webkit-touch-callout: none; ";var imagesArray=object.getElementsByTagName('img');for(var k=0;k<imagesArray.length;k++){imagesArray[k].style.cssText="pointer-events: none;";}}};HoverOnTouch.prototype.rewriteLinks=function(){for(var i=0;i<this.all_objects.length;i++){object=this.all_objects[i];if(object.tagName==='A'){var link=object.getAttribute("href");if(link){object.setAttribute('data-link',link);object.removeAttribute("href");};}}};HoverOnTouch.prototype.touchEvents=function(){var self=this;this.handlerMouseenterHoverontouch=this.mouseenterHoverontouch.bind(this);this.handlerMouseeoutHoverontouch=this.mouseeoutHoverontouch.bind(this);this.handlerMouseupHoverontouch=this.mouseupHoverontouch.bind(this);this.handlerTouchstartHoverontouch=this.touchstartHoverontouch.bind(this);this.handlerTouchendHoverontouch=this.touchendHoverontouch.bind(this);for(var i=0;i<this.all_objects.length;i++){var object=this.all_objects[i];object.allImages=object.getElementsByTagName('img');object.gifs=this.filterGifs(object.allImages);object.addEventListener('mouseenter',this.handlerMouseenterHoverontouch);object.addEventListener('mouseout',this.handlerMouseeoutHoverontouch);object.addEventListener('mouseup',this.handlerMouseupHoverontouch);object.addEventListener('touchstart',this.handlerTouchstartHoverontouch);object.addEventListener('touchend',this.handlerTouchendHoverontouch);}};HoverOnTouch.prototype.mouseenterHoverontouch=function(e){var object=this.getClosest(e.target,'.hoverontouch');this.restartGifs(object.allImages);object.className+=" hoverontouch--aktiv";};HoverOnTouch.prototype.mouseeoutHoverontouch=function(e){var object=this.getClosest(e.target,'.hoverontouch');object.classList.remove("hoverontouch--aktiv");};HoverOnTouch.prototype.mouseupHoverontouch=function(e){var object=this.getClosest(e.target,'.hoverontouch');object.classList.remove("hoverontouch--aktiv");if(object.getAttribute('data-link')){var location=object.getAttribute('data-link');if(e.which===1){window.location.href=location;}else if(e.which>=2){var win=window.open(location,'_blank');};};};HoverOnTouch.prototype.touchstartHoverontouch=function(e){this.multipleTouchAmount=this.multipleTouchAmount+1;if(this.multipleTouchAmount>1){this.multiTouchGesture=true;}
var object=this.getClosest(e.target,'.hoverontouch');this.restartGifs(object.gifs);object.className+=" hoverontouch--aktiv";this.scrollStartX=e.changedTouches[0].pageX;this.scrollStartY=e.changedTouches[0].pageY;var self=this;this.pressTimer=window.setTimeout(function(){self.longpress=true;},250);};HoverOnTouch.prototype.touchendHoverontouch=function(e){var object=this.getClosest(e.target,'.hoverontouch');object.classList.remove("hoverontouch--aktiv");clearTimeout(this.pressTimer);this.multipleTouchAmount=this.multipleTouchAmount-1;if(!this.longpress&&this.multiTouchGesture===false&&this.multipleTouchAmount===0){var XOriginal=this.scrollStartX;var XEnd=e.changedTouches[0].pageX;var distanceX=Math.abs(XOriginal-XEnd);var YEnd=e.changedTouches[0].pageY;var YOriginal=this.scrollStartY;var distanceY=Math.abs(YOriginal-YEnd);if(object.getAttribute('data-link')&&distanceY<=5&&distanceX<=5){var location=object.getAttribute('data-link');window.location.href=location;};}else{this.longpress=false;};if(this.multipleTouchAmount===0){this.multiTouchGesture=false;};e.preventDefault();e.stopPropagation();};HoverOnTouch.prototype.destroy=function(){this.removeAllListeners();console.log("removed everything. Set Hoverontouch variable to null if you like");};HoverOnTouch.prototype.removeAllListeners=function(){for(var i=0;i<this.all_objects.length;i++){var object=this.all_objects[i];object.removeEventListener('mouseenter',this.handlerMouseenterHoverontouch);object.removeEventListener('mouseout',this.handlerMouseeoutHoverontouch);object.removeEventListener('touchstart',this.handlerTouchstartHoverontouch);object.removeEventListener('touchend',this.handlerTouchendHoverontouch);}};HoverOnTouch.prototype.reInitHoverOnTouch=function(){this.removeAllListeners();this.all_objects=document.getElementsByClassName('hoverontouch');this.rewriteLinks();this.touchEvents();};HoverOnTouch.prototype.filterGifs=function(imageArray){var allGifs=[];for(var i=imageArray.length-1;i>=0;i--){var fileExtension=imageArray[i].src.split('.').pop();if(fileExtension==="gif"){allGifs.push(imageArray[i]);}}
return allGifs;};HoverOnTouch.prototype.restartGifs=function(imageArray){for(var i=imageArray.length-1;i>=0;i--){var img=imageArray[i];var imageUrl=img.src;img.src="#/";img.src=imageUrl;}};HoverOnTouch.prototype.getClosest=function(elem,selector){var firstChar=selector.charAt(0);for(;elem&&elem!==document;elem=elem.parentNode){if(firstChar==='.'){if(elem.classList.contains(selector.substr(1))){return elem;}}
if(firstChar==='#'){if(elem.id===selector.substr(1)){return elem;}}
if(firstChar==='['){if(elem.hasAttribute(selector.substr(1,selector.length-2))){return elem;}}
if(elem.tagName.toLowerCase()===selector){return elem;}}
return false;};